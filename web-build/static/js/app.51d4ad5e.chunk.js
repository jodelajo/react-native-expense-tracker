(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{178:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return it}));var n=r(15),a=r.n(n),o=r(10),i=r.n(o),l=r(179),s=r(0),u=r(275),c=r(270),d=r(269),f=r(6),b=r.n(f),j=r(2),p=r(3),g=r(37),m=r(268),y=r(1);function O(e){var t=e.icon,r=e.size,n=e.color,a=e.onPress;return Object(y.jsx)(g.default,{onPress:a,style:function(e){return e.pressed&&h.press},children:Object(y.jsx)(j.default,{style:h.buttonContainer,children:Object(y.jsx)(m.default,{name:t,size:r,color:n})})})}var h=p.default.create({buttonContainer:{borderRadius:24,padding:6,marginHorizontal:8,marginVertical:2},press:{opacity:.25}}),v={minor:"#008EEF",major:"#7E00CB",gradeBox:"#ffb900",insufficient:"#e53238",sufficient:"#88b719",primary50:"#e4d9fd",primary100:"#c6affc",primary200:"#a281f0",primary400:"#5721d4",primary500:"#4E4E4E",primary700:"#353535",primary800:"#202020",accent500:"#f7bc0c",error50:"#fcc4e4",error500:"#9b095c",gray500:"#39324a",gray700:"#221c30"},x=r(19);function w(e){var t=e.children,r=e.onPress,n=e.mode,a=e.style;return Object(y.jsx)(j.default,{style:a,children:Object(y.jsx)(g.default,{onPress:r,style:function(e){return e.pressed&&C.pressed},children:Object(y.jsx)(j.default,{style:[C.button,"flat"===n&&C.flat],children:Object(y.jsx)(x.default,{style:[C.buttonText,"flat"===n&&C.flatText],children:t})})})})}var C=p.default.create({button:{borderRadius:4,padding:8},flat:{backgroundColor:"transparent"},buttonText:{color:"white",textAlign:"center"},flatText:{color:v.primary200},pressed:{opacity:.75,backgroundColor:v.primary100,borderRadius:4}}),S=r(17),k=r.n(S);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=Object(s.createContext)({results:[],addResult:function(e){e.course,e.major,e.result,e.date,e.amount},setResults:function(e){},deleteResult:function(e){},updateResult:function(e,t){t.course,t.major,t.result,t.date,t.amount}});function E(e,t){switch(t.type){case"ADD":return[t.payload].concat(k()(e));case"SET":return t.payload;case"UPDATE":var r=e.findIndex((function(e){return e.id===t.payload.id})),n=I(I({},e[r]),t.payload.data),a=k()(e);return a[r]=n,a;case"DELETE":return e.filter((function(e){return e.id!==t.payload}));default:return e}}function R(e){var t=e.children,r=Object(s.useReducer)(E,[]),n=i()(r,2),a=n[0],o=n[1],l=Object(s.useState)(),u=i()(l,2),c=u[0],d=u[1],f=Object(s.useState)(),b=i()(f,2),j=b[0],p=b[1];var g={userId:j,userHandler:function(e){p(e)},saldo:c,setSaldo:d,results:a,setResults:function(e){o({type:"SET",payload:e})},addResult:function(e){o({type:"ADD",payload:e}),console.log("data in context",e)},deleteResult:function(e){o({type:"DELETE",payload:e})},updateResult:function(e,t){o({type:"UPDATE",payload:{id:e,data:t}})}};return Object(y.jsx)(D.Provider,{value:g,children:t})}var T=r(77),z=Object(s.createContext)({token:"",userId:"",isAuthenticated:!1,authenticate:function(e){},userHandler:function(e){},logout:function(e){}});function V(e){var t=e.children,r=Object(s.useState)(),n=i()(r,2),a=n[0],o=n[1],l=Object(s.useState)(),u=i()(l,2),c=u[0],d=u[1];function f(e){console.log("userid in context",e),d(e)}var b={userId:c,userHandler:f,userHandler:f,setUser:d,token:a,isAuthenticated:!!a,authenticate:function(e){T.default.setItem("token",e),o(e)},logout:function(e){o(null),e(null),d(null),T.default.removeItem("token")}};return Object(y.jsx)(z.Provider,{value:b,children:t})}var A=r(181),B=r(70);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e){var t=e.label,r=e.invalid,n=e.textInputConfig,a=e.style,o=[M.input];return r&&o.push(M.invalidInput),Object(y.jsxs)(j.default,{style:[M.inputContainer,a],children:[Object(y.jsx)(x.default,{style:[M.label,r&&M.invalidLabel],children:t}),Object(y.jsx)(B.default,H({style:[M.input,r&&M.invalidInput]},n))]})}var M=p.default.create({inputContainer:{marginHorizontal:4,marginVertical:8},label:{fontSize:12,color:v.primary100,marginBottom:4},input:{backgroundColor:v.primary100,padding:6,borderRadius:6,fontSize:18,color:v.primary700},invalidLabel:{color:v.error500},invalidInput:{backgroundColor:v.error50}});function N(e){return e.toISOString().slice(0,10)}var U=r(108);function F(e){var t=e.dataSource,r=void 0===t?[]:t,n=e.onSelect,a=void 0===n?function(){}:n,o=e.courseHandler,l=void 0===o?function(){}:o,u=e.course,c=e.invalid,d=Object(s.useState)(!1),f=i()(d,2),b=f[0],p=f[1];K.input;return Object(y.jsxs)(j.default,{style:K.dropdownContainer,children:[Object(y.jsxs)(U.default,{style:[K.dropdownStyle,c&&K.invalidInput],activeOpacity:.8,onPress:function(){return p(!b)},children:[Object(y.jsx)(x.default,{children:u||"Kies een vak"}),Object(y.jsx)(j.default,{style:[K.arrow,{transform:[{rotate:b?"225deg":"45deg"}]}]})]}),b&&Object(y.jsx)(j.default,{style:K.dropdown,children:r.map((function(e){return Object(y.jsx)(j.default,{style:K.item,children:Object(y.jsx)(U.default,{onPress:function(){return function(e){p(!1),a(e),l(e)}(e)},children:Object(y.jsx)(x.default,{children:e})})},e)}))})]})}var K=p.default.create({dropdownContainer:{position:"relative",marginHorizontal:4,zIndex:10},dropdownStyle:{marginVertical:8,backgroundColor:v.primary100,flexDirection:"row",borderRadius:6,justifyContent:"space-between",alignItems:"center",paddingVertical:10,paddingHorizontal:12},arrow:{marginRight:6,width:12,height:12,borderBottomColor:v.primary800,borderBottomWidth:2,borderRightColor:v.primary800,borderRightWidth:2},dropdown:{backgroundColor:v.primary50,position:"absolute",width:"100%",top:50,left:0,borderRadius:8,padding:12},item:{padding:8},invalidInput:{backgroundColor:v.error50}});function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e){var t=e.onCancel,r=e.onSubmit,n=(e.isEditing,e.submitButtonLabel),a=e.defaultValues,o=Object(s.useState)({course:{value:a?a.course:"",isValid:!0},date:{value:a?N(a.date):function(){var e=new Date,t=e.getMonth()+1,r=t<10?"0"+t:t;return e.getFullYear()+"-"+r+"-"}(),isValid:!0},major:{value:!!a&&a.major,isValid:!0},result:{value:a?a.result.toString():0,isValid:!0},amount:{value:a?a.amount.toString():0,isValid:!0}}),l=i()(o,2),u=l[0],c=l[1],d=Object(s.useState)(""),f=i()(d,2),p=(f[0],f[1]),g=Object(s.useState)(["Wiskunde","Engels","Frans","Duits","Nederlands","Geschiedenis","Aardrijkskunde","Biologie","Natuurkunde","Muziek","Gym"]),m=i()(g,1)[0];function O(){var e=u.result.value;function t(e){c((function(t){return Y(Y({},t),{},{amount:{value:e,isValid:!0}})}))}e<5.5&&u.major.value&&t(-2.5),e<4&&u.major.value&&t(-5),e<5.5&&!u.major.value&&t(-1.25),e<4&&!u.major.value&&t(-2.5),e>=5.5&&u.major.value&&t(2.5),e>=7.5&&u.major.value&&t(5),e>=5.5&&!u.major.value&&t(1.25),e>=7.5&&!u.major.value&&t(2.5)}function h(e,t){c((function(r){return Y(Y({},r),{},b()({},e,{value:t,isValid:!0}))}))}Object(s.useEffect)((function(){O()}),[u.result,u.major]);var C=!u.course.isValid||!u.date.isValid||!u.major.isValid||!u.result.isValid||!u.amount.isValid;return Object(y.jsxs)(j.default,{style:G.form,children:[Object(y.jsx)(x.default,{style:G.titleStyle,children:"Jouw resultaat"}),Object(y.jsx)(F,{dataSource:m,onSelect:function(e){p(e)},courseHandler:function(e){c((function(t){return Y(Y({},t),{},{course:{value:e,isValid:!0}})}))},course:u.course.value,style:G.dropdown,invalid:!u.course.isValid}),Object(y.jsxs)(j.default,{style:G.switchContainer,children:[Object(y.jsx)(x.default,{style:u.major.value?[G.label,G.left]:[G.label,G.activeMinor],children:"SO"}),Object(y.jsx)(A.default,{trackColor:{false:v.minor,true:v.major},thumbColor:(u.major.value,v.primary50),ios_backgroundColor:v.minor,onValueChange:h.bind(this,"major"),value:u.major.value,style:G.switch,invalid:!u.major.isValid}),Object(y.jsx)(x.default,{style:u.major.value?[G.label,G.activeMajor]:[G.label],children:"PROEFWERK"})]}),Object(y.jsxs)(j.default,{style:G.inputContainer,children:[Object(y.jsx)(W,{style:G.rowInput,label:"Datum",invalid:!u.date.isValid,textInputConfig:{placeholder:"YYYY-MM-DD",maxLength:10,keyboardType:"number-pad",onChangeText:h.bind(this,"date"),value:u.date.value}}),Object(y.jsx)(W,{style:G.rowInput,label:"Cijfer",invalid:!u.result.isValid,textInputConfig:{keyboardType:"numbers-and-punctuation",onChangeText:h.bind(this,"result"),value:u.result.value}})]}),C&&Object(y.jsx)(x.default,{style:G.errorText,children:"bla bla"}),Object(y.jsxs)(j.default,{style:G.buttons,children:[Object(y.jsx)(w,{mode:"flat",onPress:t,style:G.button,children:"Annuleren"}),Object(y.jsx)(w,{onPress:function(){O();var e={course:u.course.value,date:new Date(u.date.value),major:u.major.value,result:u.result.value,amount:u.amount.value},t=e.course.length>0,n="Invalid Date"!==e.date.toString(),a="boolean"==typeof e.major,o=!isNaN(e.result)&&e.result>0&&e.result<=10,i=!isNaN(e.amount);t&&n&&a&&o&&i?r(e):c((function(e){return{course:{value:e.course.value,isValid:t},date:{value:e.date.value,isValid:n},major:{value:e.major.value,isValid:a},result:{value:e.result.value,isValid:o},amount:{value:e.amount.value,isValid:i}}}))},style:G.button,children:n})]})]})}var G=p.default.create({form:{marginTop:30},titleStyle:{fontSize:24,fontWeight:"bold",color:"white",marginBottom:30,textAlign:"center"},dropdown:{marginHorizontal:4,backgroundColor:"red,"},inputContainer:{flexDirection:"row",justifyContent:"space-between"},switchContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",marginTop:8},switch:{marginHorizontal:14},label:{fontSize:12,color:v.primary100,width:120},left:{textAlign:"right"},rowInput:{flex:1},errorText:{textAlign:"center",color:v.error500,margin:8},buttons:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:30},button:{minWidth:120,marginHorizontal:8},activeMinor:{fontWeight:"bold",fontSize:12,textAlign:"right",borderRadius:6,backgroundColor:v.minor,color:"white",padding:8},activeMajor:{fontWeight:"bold",fontSize:12,textAlign:"left",borderRadius:6,backgroundColor:v.major,color:"white",padding:8},searchbar:{backgroundColor:v.error50,height:30,borderRadius:6}}),Z=r(46),Q=r.n(Z),q={BACKEND_URL:"https://sasha-game-production-default-rtdb.europe-west1.firebasedatabase.app",API_KEY:"AIzaSyDOA_c6DaZNZ9psydFggkMxJLShM0MatoA"};console.log("envs",q),console.log("__DEV__",!1);var X=q.BACKEND_URL;console.log("BACKEND",X);var $=X;function ee(e,t,r){return te.apply(this,arguments)}function te(){return(te=a()((function*(e,t,r){return(yield Q.a.post($+"/userId/"+t+"/results.json?auth="+r,e)).data.name}))).apply(this,arguments)}function re(e,t){return ne.apply(this,arguments)}function ne(){return(ne=a()((function*(e,t){console.log("userid in http",e);var r=yield Q.a.get($+"/userId/"+e+"/results.json?auth="+t),n=[];for(var a in r.data){var o={id:a,course:r.data[a].course,date:new Date(r.data[a].date),major:r.data[a].major,result:r.data[a].result,amount:r.data[a].amount};n.push(o)}return n}))).apply(this,arguments)}function ae(e,t,r,n){return Q.a.put($+"/userId/"+r+"/results/"+e+".json?auth="+n,t)}function oe(e,t,r){return Q.a.delete($+"/userId/"+t+"/results/"+e+".json?auth="+r)}function ie(e,t){return le.apply(this,arguments)}function le(){return(le=a()((function*(e,t){return console.log("result data",e.localId),(yield Q.a.post($+"/userId.json?auth="+t,e)).data.name}))).apply(this,arguments)}console.log("url",$);var se=r(154);function ue(){return Object(y.jsx)(j.default,{style:ce.container,children:Object(y.jsx)(se.default,{size:"large",color:"white"})})}var ce=p.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:24,backgroundColor:v.primary700}});function de(e){var t=e.message;return Object(y.jsxs)(j.default,{style:fe.container,children:[Object(y.jsx)(x.default,{style:[fe.text,fe.title],children:"Er is iets fout gegaan!"}),Object(y.jsx)(x.default,{style:fe.text,children:t})]})}var fe=p.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:24,backgroundColor:v.primary700},text:{textAlign:"center",marginBottom:8,color:"white"},title:{fontSize:20,fontWeight:"bold"}});function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e){var t,r=e.route,n=e.navigation,o=Object(s.useState)(!1),l=i()(o,2),u=l[0],c=l[1],d=Object(s.useState)(),f=i()(d,2),b=f[0],p=f[1],g=Object(s.useContext)(D),m=Object(s.useContext)(z),h=null==(t=r.params)?void 0:t.resultId,x=!!h,w=g.results.find((function(e){return e.id===h}));function C(){return(C=a()((function*(){c(!0);try{g.deleteResult(h),yield oe(h,m.userId,m.token)}catch(b){p("Kon resultaat niet verwijderen - Probeer later nog een keer!")}n.goBack()}))).apply(this,arguments)}function S(){return(S=a()((function*(e){c(!0);try{if(x)g.updateResult(h,e),console.log("manage result",m.token),yield ae(h,e,m.userId,m.token);else{var t=yield ee(e,m.userId,m.token);g.addResult(je(je({},e),{},{id:t}))}n.goBack()}catch(b){c(!1),p("Kon resultaat niet opslaan - probeer later nog een keer!")}}))).apply(this,arguments)}return Object(s.useLayoutEffect)((function(){n.setOptions({title:x?"Wijzig cijfer":"Voeg cijfer toe"})}),[n,x]),b&&!u?Object(y.jsx)(de,{message:b.toString()}):u?Object(y.jsx)(ue,{}):Object(y.jsxs)(j.default,{style:ge.container,children:[Object(y.jsx)(J,{onCancel:function(){n.goBack()},onSubmit:function(e){return S.apply(this,arguments)},submitButtonLabel:x?"Wijzig":"Voeg toe",defaultValues:w}),x&&Object(y.jsx)(j.default,{style:ge.deleteContainer,children:Object(y.jsx)(O,{icon:"trash",color:v.error500,size:36,onPress:function(){return C.apply(this,arguments)}})})]})}var ge=p.default.create({container:{flex:1,padding:24,backgroundColor:v.primary700},deleteContainer:{marginTop:16,paddingTop:8,borderTopWidth:2,borderTopColor:v.primary200,alignItems:"center"}}),me=r(99),ye=r(23);function Oe(e){var t=e.id,r=e.major,n=e.course,a=e.result,o=e.date,i=e.amount,l=Object(ye.useNavigation)();return Object(y.jsx)(g.default,{onPress:function(){l.navigate("ManageResult",{resultId:t})},style:function(e){return e.pressed&&he.pressed},children:Object(y.jsxs)(j.default,{style:[he.resultItem,r?he.resultItemMajor:he.resultItemMinor],children:[Object(y.jsxs)(j.default,{style:he.leftContainer,children:[Object(y.jsxs)(j.default,{children:[Object(y.jsx)(x.default,{style:[he.textBase,he.description],children:n}),Object(y.jsx)(x.default,{style:he.textBase,children:N(o)})]}),Object(y.jsx)(j.default,{style:[he.resultContainer,a<5.5?he.insufficient:he.sufficient],children:Object(y.jsx)(x.default,{style:[he.result,a<5.5?he.insufficient:he.sufficient],children:Number(a).toFixed(1)})})]}),Object(y.jsx)(j.default,{style:[he.amountContainer,a<5.5?he.negativeAmount:he.positiveAmount],children:Object(y.jsxs)(x.default,{style:[he.result,a<5.5?he.negativeAmount:he.positiveAmount],children:["\u20ac ",i.toFixed(2)]})})]})})}var he=p.default.create({pressed:{opacity:.5},resultItem:{paddingLeft:12,marginVertical:12,flexDirection:"row",justifyContent:"space-between",borderRadius:6,shadowColor:v.gray500,shadowRadius:4,shadowOffset:{width:1,height:1},shadowOpacity:.4,minWidth:"100%"},leftContainer:{paddingVertical:6,paddingRight:8,flexDirection:"row",width:"70%",justifyContent:"space-between"},negativeAmount:{backgroundColor:v.insufficient,fontSize:16},positiveAmount:{backgroundColor:v.sufficient,fontSize:16},resultItemMajor:{backgroundColor:v.major},resultItemMinor:{backgroundColor:v.minor},sufficient:{backgroundColor:v.primary500,color:v.sufficient,fontSize:16},insufficient:{backgroundColor:v.primary500,color:v.insufficient,fontSize:16},textBase:{color:v.primary50},description:{fontSize:14,marginBottom:4,fontWeight:"bold"},resultContainer:{paddingHorizontal:12,paddingVertical:4,backgroundColor:"white",justifyContent:"center",alignItems:"center",borderRadius:4,width:60},amountContainer:{paddingHorizontal:8,paddingVertical:4,backgroundColor:"white",justifyContent:"center",alignItems:"flex-end",borderTopRightRadius:4,borderBottomRightRadius:4,width:"30%"},result:{fontWeight:"bold"}});function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){return Object(y.jsx)(Oe,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.item))}function we(e){var t=e.results;return t.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),Object(y.jsx)(me.default,{data:t,renderItem:xe,keyExtractor:function(e){return e.id}})}function Ce(e){var t=e.results,r=e.periodName,n=Object(s.useContext)(D).setSaldo,a=t.reduce((function(e,t){return e+t.amount}),0);return Object(s.useEffect)((function(){n(a)}),[a]),Object(y.jsxs)(j.default,{style:Se.container,children:[Object(y.jsx)(x.default,{style:Se.period,children:r}),Object(y.jsxs)(x.default,{style:Se.sum,children:["\u20ac ",a.toFixed(2)]})]})}var Se=p.default.create({container:{padding:8,backgroundColor:v.primary50,borderRadius:6,flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},period:{fontSize:12,color:v.primary400},sum:{fontSize:16,fontWeight:"bold",color:v.primary500}});function ke(e){var t=e.results,r=e.resultPeriod,n=e.fallbackText,a=Object(y.jsx)(x.default,{style:Pe.infoText,children:n});return t.length>0&&(a=Object(y.jsx)(we,{results:t})),Object(y.jsxs)(j.default,{style:Pe.container,children:[Object(y.jsx)(Ce,{results:t,periodName:r}),a]})}var Pe=p.default.create({container:{paddingHorizontal:24,paddingTop:24,paddingBottom:0,backgroundColor:v.primary700,flex:1},infoText:{color:"white",fontSize:16,textAlign:"center",marginTop:32}});function Ie(){var e=Object(s.useState)(!0),t=i()(e,2),r=t[0],n=t[1],o=Object(s.useState)(),l=i()(o,2),u=l[0],c=l[1],d=Object(s.useContext)(D),f=Object(s.useContext)(z);if(Object(s.useEffect)((function(){function e(){return(e=a()((function*(){n(!0);try{var e=yield re(f.userId,f.token);d.setResults(e)}catch(u){c("Kan geen recente resultaten ophalen - Probeer later nog een keer!")}n(!1)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f.userId]),u&&!r)return Object(y.jsx)(de,{message:u.toString()});if(r)return Object(y.jsx)(ue,{});var b=d.results.filter((function(e){var t,r,n=new Date,a=(t=n,r=30,new Date(t.getFullYear(),t.getMonth(),t.getDate()-r));return e.date>=a&&e.date<=n}));return Object(y.jsx)(ke,{results:b,resultPeriod:"Deze periode",fallbackText:"Nog geen resultaten"})}function De(){var e=Object(s.useContext)(D);return Object(y.jsx)(ke,{results:e.results,resultPeriod:"Totaal",fallbackText:"Nog geen resultaten"})}var Ee=r(56);var Re=function(e){var t=e.children,r=e.onPress;return Object(y.jsx)(g.default,{style:function(e){var t=e.pressed;return[Te.button,t&&Te.pressed]},onPress:r,children:Object(y.jsx)(j.default,{children:Object(y.jsx)(x.default,{style:Te.buttonText,children:t})})})},Te=p.default.create({button:{paddingVertical:6,paddingHorizontal:12},pressed:{opacity:.7},buttonText:{textAlign:"center",color:v.error50}});var ze=function(e){var t=e.label,r=e.keyboardType,n=e.secure,a=e.onUpdateValue,o=e.value,i=e.isInvalid;return Object(y.jsxs)(j.default,{style:Ve.inputContainer,children:[Object(y.jsx)(x.default,{style:[Ve.label,i&&Ve.labelInvalid],children:t}),Object(y.jsx)(B.default,{style:[Ve.input,i&&Ve.inputInvalid],autoCapitalize:o.toString(),keyboardType:r,secureTextEntry:n,onChangeText:a,value:o})]})},Ve=p.default.create({inputContainer:{marginVertical:8},label:{color:"white",marginBottom:4},labelInvalid:{color:v.error500},input:{paddingVertical:8,paddingHorizontal:6,backgroundColor:v.primary100,borderRadius:4,fontSize:16},inputInvalid:{backgroundColor:v.error50}});var Ae=function(e){var t=e.isLogin,r=e.onSubmit,n=e.credentialsInvalid,a=Object(s.useState)(""),o=i()(a,2),l=o[0],u=o[1],c=Object(s.useState)(""),d=i()(c,2),f=d[0],b=d[1],p=Object(s.useState)(""),g=i()(p,2),m=g[0],O=g[1],h=Object(s.useState)(""),v=i()(h,2),x=v[0],C=v[1],S=n.email,k=n.confirmEmail,P=n.password,I=n.confirmPassword;function D(e,t){switch(e){case"email":u(t);break;case"confirmEmail":b(t);break;case"password":O(t);break;case"confirmPassword":C(t)}}return Object(y.jsx)(j.default,{style:Be.form,children:Object(y.jsxs)(j.default,{children:[Object(y.jsx)(ze,{label:"Emailadres",onUpdateValue:D.bind(this,"email"),value:l,keyboardType:"email-address",isInvalid:S}),!t&&Object(y.jsx)(ze,{label:"Emailadres bevestigen",onUpdateValue:D.bind(this,"confirmEmail"),value:f,keyboardType:"email-address",isInvalid:k}),Object(y.jsx)(ze,{label:"Wachtwoord",onUpdateValue:D.bind(this,"password"),secure:!0,value:m,isInvalid:P}),!t&&Object(y.jsx)(ze,{label:"Wachtwoord bevestigen",onUpdateValue:D.bind(this,"confirmPassword"),secure:!0,value:x,isInvalid:I}),Object(y.jsx)(j.default,{style:Be.buttons,children:Object(y.jsx)(w,{onPress:function(){r({email:l,confirmEmail:f,password:m,confirmPassword:x})},style:Be.button,children:t?"Inloggen":"Inschrijven"})})]})})},Be=p.default.create({buttons:{marginTop:12},button:{backgroundColor:v.major}});var Le=function(e){var t=e.isLogin,r=e.onAuthenticate,n=Object(ye.useNavigation)(),a=Object(s.useState)({email:!1,password:!1,confirmEmail:!1,confirmPassword:!1}),o=i()(a,2),l=o[0],u=o[1];return Object(y.jsxs)(j.default,{style:He.authContent,children:[Object(y.jsx)(Ae,{isLogin:t,onSubmit:function(e){var n=e.email,a=e.confirmEmail,o=e.password,i=e.confirmPassword;n=n.trim(),o=o.trim();var l=n.includes("@"),s=o.length>6,c=n===a,d=o===i;if(!l||!s||!t&&(!c||!d))return Ee.default.alert("Invalid input","Please check your entered credentials."),void u({email:!l,confirmEmail:!l||!c,password:!s,confirmPassword:!s||!d});r({email:n,password:o})},credentialsInvalid:l}),Object(y.jsx)(j.default,{style:He.buttons,children:Object(y.jsx)(Re,{onPress:function(){t?n.replace("Signup"):n.replace("Login")},children:t?"Maak een nieuw account aan":"Al een account?"})})]})},He=p.default.create({authContent:{marginTop:64,marginHorizontal:32,padding:16,borderRadius:8,backgroundColor:v.primary500,elevation:2,shadowColor:"black",shadowOffset:{width:1,height:1},shadowOpacity:.35,shadowRadius:4},buttons:{marginTop:8}}),We=q.API_KEY;function Me(e,t,r){return Ne.apply(this,arguments)}function Ne(){return(Ne=a()((function*(e,t,r){var n="https://identitytoolkit.googleapis.com/v1/accounts:"+e+"?key="+We,a=yield Q.a.post(n,{email:t,password:r,returnSecureToken:!0});return"signUp"===e&&(yield ie(a.data,a.data.idToken)),a.data.idToken}))).apply(this,arguments)}function Ue(e,t){return Me("signUp",e,t)}function Fe(e,t){return Me("signInWithPassword",e,t)}var Ke=q.BACKEND_URL;function _e(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=a()((function*(e,t){var r;console.log("userid in Fetchuser",e);var n=[],a=yield Q.a.get(Ke+"/userId.json?auth="+t);return Object.entries((null==(r=a.data)?void 0:r.userId)||a.data).find((function(t){return t[1].email===e&&n.push(t)})),n}))).apply(this,arguments)}function Je(){var e=Object(s.useState)(!1),t=i()(e,2),r=t[0],n=t[1],o=Object(s.useState)(),l=i()(o,2),u=(l[0],l[1],Object(s.useContext)(D)),c=Object(s.useContext)(z);function d(){return(d=a()((function*(e){var t=e.email,r=e.password;console.log(t,r),n(!0);try{var a=yield Fe(t,r);c.authenticate(a);var o=yield _e(t,a);console.log("user",o);var i=o[0];c.userHandler(i[0]);var l=yield re(i[0],a);u.setResults(l)}catch(s){Ee.default.alert("blabla","sdoij soidfjsod isdoi sdofij")}n(!1)}))).apply(this,arguments)}return r?Object(y.jsx)(ue,{}):Object(y.jsx)(j.default,{style:Ge.container,children:Object(y.jsx)(Le,{isLogin:!0,onAuthenticate:function(e){return d.apply(this,arguments)}})})}var Ge=p.default.create({container:{flex:1,backgroundColor:v.primary700}});function Ze(){var e=Object(s.useState)(!1),t=i()(e,2),r=t[0],n=t[1],o=Object(s.useState)(),l=i()(o,2),u=l[0],c=l[1],d=Object(s.useContext)(z);function f(){return(f=a()((function*(e){var t=e.email,r=e.password;console.log(t,r);try{n(!0);var a=yield Ue(t,r);d.authenticate(a),d.logout()}catch(u){c(u.toString())}n(!1)}))).apply(this,arguments)}return r?Object(y.jsx)(ue,{}):u&&!r?(console.log(u),Object(y.jsx)(de,{message:u})):Object(y.jsx)(j.default,{style:Qe.container,children:Object(y.jsx)(Le,{onAuthenticate:function(e){return f.apply(this,arguments)}})})}var Qe=p.default.create({container:{flex:1,backgroundColor:v.primary700}}),qe=r(116),Xe=r(176),$e=Object(d.default)(),et=Object(c.default)();function tt(){var e=Object(s.useContext)(z),t=Object(s.useContext)(D);return Object(y.jsxs)(et.Navigator,{screenOptions:function(r){var n=r.navigation;return{headerStyle:{backgroundColor:v.primary500},headerTintColor:"white",tabBarStyle:{backgroundColor:v.primary500},tabBarActiveTintColor:v.accent500,headerLeft:function(r){var n=r.tintColor;return Object(y.jsx)(O,{icon:"log-out-outline",size:24,color:n,onPress:function(){return e.logout(t.setResults)}})},headerRight:function(e){var t=e.tintColor;return Object(y.jsx)(O,{icon:"add",size:24,color:t,onPress:function(){n.navigate("ManageResult")}})}}},children:[Object(y.jsx)(et.Screen,{name:"RecentResults",component:Ie,options:{title:"Resultaten deze periode",tabBarLabel:"Deze periode",tabBarIcon:function(e){var t=e.color,r=e.size;return Object(y.jsx)(m.default,{name:"hourglass",size:r,color:t})}}}),Object(y.jsx)(et.Screen,{name:"AllResults",component:De,options:{title:"Alle resultaten",tabBarLabel:"Totaal",tabBarIcon:function(e){var t=e.color,r=e.size;return Object(y.jsx)(m.default,{name:"calendar",size:r,color:t})}}})]})}function rt(){return Object(y.jsxs)($e.Navigator,{screenOptions:{headerStyle:{backgroundColor:v.primary500},headerTintColor:"white"},children:[Object(y.jsx)($e.Screen,{name:"Login",component:Je,options:{title:"Inloggen"}}),Object(y.jsx)($e.Screen,{name:"Signup",component:Ze,options:{title:"Sign up"}})]})}function nt(){return Object(y.jsxs)($e.Navigator,{screenOptions:{headerStyle:{backgroundColor:v.primary500},headerTintColor:"white"},children:[Object(y.jsx)($e.Screen,{name:"ResultsOverview",component:tt,options:{headerShown:!1,title:"Overview"}}),Object(y.jsx)($e.Screen,{name:"ManageResult",component:pe,options:{title:"manage result",presentation:"modal"}})]})}function at(){var e=Object(s.useContext)(z);return Object(y.jsx)(u.default,{children:e.isAuthenticated?Object(y.jsx)(nt,{}):Object(y.jsx)(rt,{})})}function ot(){var e=Object(s.useState)(!0),t=i()(e,2),r=t[0],n=t[1],o=Object(s.useContext)(z),l=Object(Xe.useMediaQuery)({minDeviceWidth:450});console.log("big screen",l),Object(s.useEffect)((function(){function e(){return(e=a()((function*(){var e=yield T.default.getItem("token");e&&o.authenticate(e),n(!1)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var u=Object(s.useCallback)(a()((function*(){r||(yield qe.hideAsync())})),[r]);return r?null:l?Object(y.jsx)(j.default,{style:lt.web,onLayout:u,children:Object(y.jsx)(j.default,{style:lt.container,children:Object(y.jsx)(at,{})})}):Object(y.jsx)(j.default,{style:{flex:1},onLayout:u,children:Object(y.jsx)(at,{})})}function it(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(l.StatusBar,{style:"light"}),Object(y.jsx)(V,{children:Object(y.jsx)(R,{children:Object(y.jsx)(ot,{})})})]})}qe.preventAutoHideAsync();var lt=p.default.create({web:{backgroundColor:v.primary800,flex:1,alignItems:"center",justifyContent:"flex-start"},container:{marginTop:20,marginBottom:40,minWidth:350,maxWidth:428,maxHeight:928,flex:1}})},188:function(e,t,r){e.exports=r(257)}},[[188,1,2]]]);
//# sourceMappingURL=app.51d4ad5e.chunk.js.map